{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nasync function searchImage(query, page) {\n  try {\n    const response = await axios.get('', {\n      params: {\n        page,\n        per_page: 15,\n        key: '45151719-ad1ed1cd151d376d4bdd12a44',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default searchImage;\n","function renderCards({ hits }) {\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n\t    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\tclass=\"gallery-image\" \n\t\tsrc=\"${webformatURL}\" \n\t\talt=\"${tags}\"\n\t\t/>\n\t    </a>\n        <ul class=\"gallery-inner-list\">\n        <li class=\"gallery-inner-item\">\n        <p class=\"gallery-inner-name\">Likes</p>\n        <p class=\"gallery-inner-value\">${likes}</p>\n        </li>\n        <li class=\"gallery-inner-item\">\n        <p class=\"gallery-inner-name\">Views</p>\n        <p class=\"gallery-inner-value\">${views}</p>\n        </li>\n        <li class=\"gallery-inner-item\">\n        <p class=\"gallery-inner-name\">Comments</p>\n        <p class=\"gallery-inner-value\">${comments}</p>\n        </li>\n        <li class=\"gallery-inner-item\">\n        <p class=\"gallery-inner-name\">Downloads</p>\n        <p class=\"gallery-inner-value\">${downloads}</p>\n        </li>\n        </ul>\n   </li>`;\n      }\n    )\n    .join('');\n}\n\nexport default renderCards;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport searchImage from './js/pixabay-api.js';\nimport renderCards from './js/render-functions.js';\n\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load');\n\nformEl.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleClick);\n\nlet page = 1;\nlet inputValue = null;\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  page = 1;\n  showLoader();\n  hideBtn();\n\n  const form = event.currentTarget;\n  inputValue = form.elements.query.value.trim();\n\n  if (inputValue === '') {\n    hideLoader();\n    iziToast.info({\n      message: 'Please enter your request',\n    });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const response = await searchImage(inputValue, page);\n\n    if (!response.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideBtn();\n    }\n\n    galleryEl.innerHTML = renderCards(response);\n    scrollPage();\n    gallery.refresh();\n\n    response.totalHits > 15 ? showBtn() : hideBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nasync function handleClick() {\n  page += 1;\n\n  showLoader();\n  hideBtn();\n\n  try {\n    const response = await searchImage(inputValue, page);\n    galleryEl.insertAdjacentHTML('beforeend', renderCards(response));\n    scrollPage();\n    gallery.refresh();\n\n    const lastPage = Math.ceil(response.totalHits / 15);\n\n    if (lastPage === page) {\n      hideBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n      });\n      return;\n    }\n\n    showBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nfunction scrollPage() {\n  const card = document.querySelector('.gallery-item');\n\n  window.scrollBy({\n    top: card.getBoundingClientRect().height * 2,\n    behavior: 'smooth',\n  });\n}\n\nlet gallery = new SimpleLightbox('.gallery .gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\niziToast.settings({\n  message: 'Please enter your request',\n  class: `izi-toast`,\n  position: 'topRight',\n  backgroundColor: '#ef4040',\n  messageColor: 'white',\n  messageSize: '16',\n  theme: 'dark',\n});\n"],"names":["axios","searchImage","query","page","error","renderCards","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","galleryEl","loader","loadMoreBtn","handleSearch","handleClick","inputValue","event","showLoader","hideBtn","form","hideLoader","iziToast","response","scrollPage","gallery","showBtn","card","SimpleLightbox"],"mappings":"+vBAEAA,EAAM,SAAS,QAAU,2BAEzB,eAAeC,EAAYC,EAAOC,EAAM,CACtC,GAAI,CAaF,OAZiB,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,KAAAG,EACA,SAAU,GACV,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACP,CAAK,GAEe,IACjB,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCtBA,SAASC,EAAY,CAAE,KAAAC,GAAQ,CAC7B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,qCACsBL,CAAa;AAAA;AAAA;AAAA,SAGzCD,CAAY;AAAA,SACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAM4BC,CAAK;AAAA;AAAA;AAAA;AAAA,yCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,yCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,yCAIRC,CAAS;AAAA;AAAA;AAAA,SAK7C,EACA,KAAK,EAAE,CACZ,CCnCA,MAAMC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,OAAO,EAElDH,EAAO,iBAAiB,SAAUI,CAAY,EAC9CD,EAAY,iBAAiB,QAASE,CAAW,EAEjD,IAAIhB,EAAO,EACPiB,EAAa,KAEjB,eAAeF,EAAaG,EAAO,CACjCA,EAAM,eAAc,EACpBN,EAAU,UAAY,GACtBZ,EAAO,EACPmB,IACAC,IAEA,MAAMC,EAAOH,EAAM,cAGnB,GAFAD,EAAaI,EAAK,SAAS,MAAM,MAAM,KAAI,EAEvCJ,IAAe,GAAI,CACrBK,IACAC,EAAS,KAAK,CACZ,QAAS,2BACf,CAAK,EACD,MACD,CAEDJ,IAEA,GAAI,CACF,MAAMK,EAAW,MAAM1B,EAAYmB,EAAYjB,CAAI,EAE9CwB,EAAS,KAAK,SACjBD,EAAS,MAAM,CACb,QACE,0EACV,CAAO,EACDH,KAGFR,EAAU,UAAYV,EAAYsB,CAAQ,EAC1CC,IACAC,EAAQ,QAAO,EAEfF,EAAS,UAAY,GAAKG,EAAS,EAAGP,EAAO,CAC9C,OAAQnB,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRqB,IACAD,EAAK,MAAK,CACX,CACH,CAEA,eAAeL,GAAc,CAC3BhB,GAAQ,EAERmB,IACAC,IAEA,GAAI,CACF,MAAMI,EAAW,MAAM1B,EAAYmB,EAAYjB,CAAI,EAOnD,GANAY,EAAU,mBAAmB,YAAaV,EAAYsB,CAAQ,CAAC,EAC/DC,IACAC,EAAQ,QAAO,EAEE,KAAK,KAAKF,EAAS,UAAY,EAAE,IAEjCxB,EAAM,CACrBoB,IACAG,EAAS,KAAK,CACZ,QAAS,2DACjB,CAAO,EACD,MACD,CAEDI,GACD,OAAQ1B,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRqB,GACD,CACH,CAEA,SAASK,GAAU,CACjBb,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASM,GAAU,CACjBN,EAAY,UAAU,IAAI,WAAW,CACvC,CAEA,SAASK,GAAa,CACpBN,EAAO,UAAU,OAAO,WAAW,CACrC,CAEA,SAASS,GAAa,CACpBT,EAAO,UAAU,IAAI,WAAW,CAClC,CAEA,SAASY,GAAa,CACpB,MAAMG,EAAO,SAAS,cAAc,eAAe,EAEnD,OAAO,SAAS,CACd,IAAKA,EAAK,sBAAuB,EAAC,OAAS,EAC3C,SAAU,QACd,CAAG,CACH,CAEA,IAAIF,EAAU,IAAIG,EAAe,yBAA0B,CACzD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDN,EAAS,SAAS,CAChB,QAAS,4BACT,MAAO,YACP,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,YAAa,KACb,MAAO,MACT,CAAC"}